/* built */!function(){"use strict";var l;function t(){var e,t;l.startscreen.classList.add("hidden"),l.status=1,m(),l.starttimer=(e=5e3,t=0,function(){0<=--e&&(window.setTimeout(l.starttimer,3e3-t),r(),300<3e3-t&&(t+=50))}),window.setTimeout(l.starttimer,3e3)}function n(){window.clearInterval(l.endtimer),l.container.el.innerHTML="",l.container.el.classList.remove("endgame"),l.endscreen.classList.remove("visible"),l.score.spawned=0,l.score.removed=0,t()}function m(){var e,t,n;1==l.status&&(e=l.score.spawned-l.score.removed,l.score.board.spawned.innerHTML=l.score.spawned,l.score.board.removed.innerHTML=l.score.removed,l.score.board.remaining.innerHTML=e,t=100/l.pointcap*e,l.progress.style.width=t+"%",t<50?l.progress.classList.remove("alert"):t<75?(l.progress.classList.remove("warning"),l.progress.classList.add("alert")):t<90?(l.progress.classList.remove("alert","danger"),l.progress.classList.add("warning")):t<100&&(l.progress.classList.remove("warning"),l.progress.classList.add("danger")),l.pointcap==e&&(l.starttimer=!1,l.status=2,l.container.el.classList.add("endgame"),l.endscreen.classList.add("visible"),l.audio.end.play(),n=0,l.endtimer=window.setInterval(function(){r(),500==++n&&window.clearInterval(l.endtimer)},50)))}function u(){var e,t,n,r={};switch(t=Math.floor(1e3*Math.random()),n=Math.floor(3*Math.random()+1),t<350?r.type="tunicate-1":t<700?r.type="tunicate-2":t<900?r.type="seaweed-1":t<1e3&&(r.type="crab"),n){case 1:e="slow";break;case 2:e="fast";break;default:e=""}return r.div=document.createElement("div"),r.div.className="creature "+r.type+" "+e,r}function r(){var e,t,n,r,a,o,s,d,i,c;e=u(),d=e.type,i=l.container.el.querySelectorAll("."+d+":not(.destroyed)"),c=Math.floor(Math.random()*i.length),t=0<i.length?i[c].parentNode.getAttribute("id"):null,s="c_"+Math.random().toString(36).substr(2,9),Math.floor(1e3*Math.random())<700&&null!=t&&"crab"!=e.type?(r=Math.min(l.container.x-128,Math.max(l.creatures[t].x+l.unit*Math.floor(17*Math.random()-8))),a=Math.min(l.container.y,Math.max(256,l.creatures[t].y+l.unit*Math.floor(17*Math.random()-8)))):(r=l.unit*Math.floor(Math.random()*(l.container.x/l.unit)),a=Math.max(256,l.unit*Math.floor(Math.random()*(l.container.y/l.unit)))),o=Math.floor(10*Math.random()+1),(n=document.createElement("div")).id=s,n.className="creature-wrapper",n.style="top:"+a+"px; left:"+r+"px; z-index:"+o,n.appendChild(e.div),1==l.status&&n.addEventListener("click",function(e){switch(l.creatures[e].type){case"crab":l.audio.elevate.play();break;case"tunicate-1":case"tunicate-2":l.audio.bounce.play();break;case"seaweed-1":l.audio.shoot.play();break;default:l.audio.shoot.play()}document.getElementById(e).classList.add("destroyed"),l.creatures[e].status=0,l.score.removed++,m()}.bind(null,s),!1),l.creatures[s]={x:r,y:a,type:e.type,status:1},l.container.el.appendChild(n),l.score.spawned++,m()}function a(){window.pageYOffset>l.score.board.top?l.score.board.el.classList.add("fixed"):l.score.board.el.classList.remove("fixed")}function o(){l.container.x=l.container.el.offsetWidth,l.container.y=l.container.el.offsetHeight}window.addEventListener("load",function(){var e="../../wp-content/themes/uri-modern-home/features/2018/space-invaders/";(l={unit:16,status:0,pointcap:50,creatures:{},container:{},score:{spawned:0,removed:0},audio:{bounce:new Audio(e+"mp3/bounce.mp3"),elevate:new Audio(e+"mp3/elevate.mp3"),shoot:new Audio(e+"mp3/shoot.mp3"),end:new Audio(e+"mp3/end.mp3")}}).habitat=document.getElementById("creature-box").querySelector(".creatures"),l.startscreen=document.getElementById("startscreen"),l.container.el=document.getElementById("creature-container"),l.container.x=l.container.el.offsetWidth,l.container.y=l.container.el.offsetHeight,l.score.board={el:document.getElementById("scoreboard"),spawned:document.getElementById("spawned").querySelector(".score"),removed:document.getElementById("removed").querySelector(".score"),remaining:document.getElementById("remaining").querySelector(".score")},l.score.board.top=l.score.board.el.getBoundingClientRect().top,function(){var e,t,n,r,a;for(t=document.createElement("div"),e=0;e<15;e++)n=u(),r=l.unit*Math.floor(48*Math.random()+1),a=Math.floor(10*Math.random()+1),n.div.style="left:"+r+"px; z-index:"+a,t.appendChild(n.div);l.habitat.appendChild(t)}(),l.play=document.getElementById("play-game"),l.play.addEventListener("click",t,!1),l.reset=document.getElementById("reset-game"),l.reset.addEventListener("click",n,!1),l.progress=document.getElementById("progress-bar"),l.endscreen=document.getElementById("endscreen"),window.addEventListener("scroll",a,!1),window.addEventListener("resize",o,!1)},!1)}();
/* built */!function(){"use strict";var m;function t(){var e,t;m.startscreen.classList.add("hidden"),m.status=1,u(),m.starttimer=(e=5e3,t=0,function(){0<=--e&&(window.setTimeout(m.starttimer,3e3-t),r(),m.n++,300<3e3-t&&(t+=30))}),window.setTimeout(m.starttimer,3e3)}function n(){window.clearInterval(m.endtimer),m.container.el.innerHTML="",m.container.el.classList.remove("endgame"),m.endscreen.classList.remove("visible"),m.progress.className="",m.score.spawned=0,m.score.removed=0,m.n=0,t()}function u(){var e,t,n;1==m.status&&(e=m.score.spawned-m.score.removed,m.score.board.spawned.innerHTML=m.score.spawned,m.score.board.removed.innerHTML=m.score.removed,m.score.board.remaining.innerHTML=e,t=100/m.pointcap*e,m.progress.style.width=t+"%",t<50?m.progress.classList.remove("alert"):t<75?(m.progress.classList.remove("warning"),m.progress.classList.add("alert")):t<90?(m.progress.classList.remove("alert","danger"),m.progress.classList.add("warning")):t<100&&(m.progress.classList.remove("warning"),m.progress.classList.add("danger")),m.pointcap==e&&(m.starttimer=!1,m.status=2,m.container.el.classList.add("endgame"),m.endscreen.classList.add("visible"),m.audio.end.play(),n=0,m.endtimer=window.setInterval(function(){r(),500==++n&&window.clearInterval(m.endtimer)},20)))}function p(){var e,t,n,r={};switch(t=Math.floor(1e3*Math.random()),n=Math.floor(3*Math.random()+1),t<350?r.type="tunicate-1":t<700?r.type="tunicate-2":t<900?r.type="seaweed-1":t<1e3&&(r.type="crab"),n){case 1:e="slow";break;case 2:e="fast";break;default:e=""}return r.div=document.createElement("div"),r.div.className="creature "+r.type+" "+e,r}function r(){var e,t,n,r,a,o,s,d,i,c,l;e=p(),i=e.type,c=m.container.el.querySelectorAll("."+i+":not(.destroyed)"),l=Math.floor(Math.random()*c.length),t=0<c.length?c[l].parentNode.getAttribute("id"):null,d="c_"+Math.random().toString(36).substr(2,9),n={left:0,right:m.container.x-128,top:Math.max(128,m.container.y-m.score.board.h-16*m.n),bottom:m.container.y-m.score.board.h},Math.floor(1e3*Math.random())<700&&null!=t&&"crab"!=e.type?(a=Math.min(n.right,Math.max(128,m.creatures[t].x+m.unit*Math.floor(17*Math.random()-8))),o=Math.min(n.bottom,Math.max(128,m.creatures[t].y+m.unit*Math.floor(17*Math.random()-8)))):(a=Math.max(n.left,m.unit*Math.floor(Math.random()*(n.right/m.unit))),o=Math.max(n.top,m.unit*Math.floor(Math.random()*(n.bottom/m.unit)))),s=Math.floor(10*Math.random()+1),(r=document.createElement("div")).id=d,r.className="creature-wrapper",r.style="top:"+o+"px; left:"+a+"px; z-index:"+s,r.appendChild(e.div),1==m.status&&r.addEventListener("click",function(e){switch(m.creatures[e].type){case"crab":h(m.audio.elevate);break;case"tunicate-1":case"tunicate-2":h(m.audio.bounce);break;case"seaweed-1":h(m.audio.shoot);break;default:h(m.audio.shoot)}document.getElementById(e).classList.add("destroyed"),m.creatures[e].status=0,m.score.removed++,u()}.bind(null,d),!1),m.creatures[d]={x:a,y:o,type:e.type,status:1},m.container.el.appendChild(r),m.score.spawned++,u()}function h(e){e.paused?e.play():e.currentTime=0}function a(){window.pageYOffset>m.story.top+m.story.h+m.score.board.h-m.container.y?m.score.board.el.classList.add("fluid"):m.score.board.el.classList.remove("fluid")}function o(){m.container.x=m.container.el.offsetWidth,m.container.y=m.container.el.offsetHeight}window.addEventListener("load",function(){var e;e="../../wp-content/themes/uri-modern-home/features/2018/space-invaders/",(m={unit:16,status:0,pointcap:50,n:0,story:{h:document.getElementById("story").offsetHeight,top:document.getElementById("story").getBoundingClientRect().top},creatures:{},container:{},score:{spawned:0,removed:0},audio:{bounce:new Audio(e+"mp3/bounce.mp3"),elevate:new Audio(e+"mp3/elevate.mp3"),shoot:new Audio(e+"mp3/shoot.mp3"),end:new Audio(e+"mp3/end.mp3"),menu:new Audio(e+"mp3/menu.mp3")}}).habitat=document.getElementById("creature-box").querySelector(".creatures"),m.startscreen=document.getElementById("startscreen"),m.container.el=document.getElementById("creature-container"),m.container.x=m.container.el.offsetWidth,m.container.y=m.container.el.offsetHeight,m.score.board={el:document.getElementById("scoreboard"),spawned:document.getElementById("spawned").querySelector(".score"),removed:document.getElementById("removed").querySelector(".score"),remaining:document.getElementById("remaining").querySelector(".score")},m.score.board.h=m.score.board.el.offsetHeight,function(){var e,t,n,r,a;for(t=document.createElement("div"),e=0;e<15;e++)n=p(),r=m.unit*Math.floor(48*Math.random()+1),a=Math.floor(10*Math.random()+1),n.div.style="left:"+r+"px; z-index:"+a,t.appendChild(n.div);m.habitat.appendChild(t)}(),m.play=document.getElementById("play-game"),m.play.addEventListener("click",function(){h(m.audio.menu),setTimeout(t,1e3)},!1),m.reset=document.getElementById("reset-game"),m.reset.addEventListener("click",function(){h(m.audio.menu),setTimeout(n,1e3)},!1),m.progress=document.getElementById("progress-bar"),m.endscreen=document.getElementById("endscreen"),window.addEventListener("scroll",a,!1),window.addEventListener("resize",o,!1)},!1)}();
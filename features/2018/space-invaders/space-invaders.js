/* built */!function(){"use strict";var l;function t(){l.startscreen.classList.add("hidden"),function(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",a,!1);window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,document.onkeydown=null}(),1!=l.status&&(l.status=1,m(),l.timing.start=Date.now(),setTimeout(i,l.timing.init))}function i(){var e,t,n,o,a,r;1==l.status&&(e=Date.now()-l.timing.start,o=e/l.timing.duration*100,a=l.timing.duration,r=o*(o/a),t=Math.round(1e3*r)/1e3,n=Math.max(120,Math.min(350,l.container.x*l.container.y/1e6*300)),l.timing.interval=Math.max(n,l.timing.init-l.timing.init*t),s(),l.n++,setTimeout(i,l.timing.interval))}function n(){window.clearInterval(l.endtimer),l.container.el.innerHTML="",l.container.el.classList.remove("endgame"),l.endscreen.classList.remove("visible"),l.progress.className="",l.score.points=0,l.score.spawned=0,l.score.removed=0,l.n=0,t()}function m(){var e,t,n;1==l.status&&(e=l.score.spawned-l.score.removed,l.score.board.points.innerHTML=l.score.points,l.score.board.remaining.innerHTML=e,t=100/l.pointcap*e,l.progress.style.width=t+"%",t<50?l.progress.classList.remove("alert"):t<75?(l.progress.classList.remove("warning"),l.progress.classList.add("alert")):t<90?(l.progress.classList.remove("alert","danger"),l.progress.classList.add("warning")):t<100&&(l.progress.classList.remove("warning"),l.progress.classList.add("danger")),l.pointcap==e&&(l.status=2,l.container.el.classList.add("endgame"),l.endscreen.classList.add("visible"),l.score.board.remaining.innerHTML=">"+l.pointcap,l.audio.end.play(),n=0,l.endtimer=window.setInterval(function(){s(),500==++n&&window.clearInterval(l.endtimer)},20)))}function p(){var e,t,n,o={};switch(t=Math.floor(1e3*Math.random()),n=Math.floor(3*Math.random()+1),t<350?o.type="tunicate-1":t<700?o.type="tunicate-2":t<900?o.type="seaweed-1":t<1e3&&(o.type="crab"),n){case 1:e="slow";break;case 2:e="fast";break;default:e=""}return o.div=document.createElement("div"),o.div.className="creature "+o.type+" "+e,o}function s(){var e,t,n,o,a,r,i,s,d,c,u;e=p(),d=e.type,c=l.container.el.querySelectorAll("."+d+":not(.destroyed)"),u=Math.floor(Math.random()*c.length),t=0<c.length?c[u].parentNode.getAttribute("id"):null,s="c_"+Math.random().toString(36).substr(2,9),n={left:0,right:l.container.x-128,top:Math.max(128,l.container.y-16*l.n),bottom:l.container.y-l.score.board.h},Math.floor(1e3*Math.random())<700&&null!=t&&"crab"!=e.type?(a=Math.min(n.right,Math.max(128,l.creatures[t].x+l.unit*Math.floor(17*Math.random()-8))),r=Math.min(n.bottom,Math.max(128,l.creatures[t].y+l.unit*Math.floor(17*Math.random()-8)))):(a=Math.max(n.left,l.unit*Math.floor(Math.random()*(n.right/l.unit))),r=Math.max(n.top,l.unit*Math.floor(Math.random()*(n.bottom/l.unit)))),i=Math.floor(10*Math.random()+1),(o=document.createElement("div")).id=s,o.className="creature-wrapper",o.style="top:"+r+"px; left:"+a+"px; z-index:"+i,o.appendChild(e.div),1==l.status&&o.addEventListener("click",function(e){var t;switch(l.creatures[e].type){case"crab":h(l.audio.elevate),t=30;break;case"tunicate-1":h(l.audio.bounce),t=10;break;case"tunicate-2":h(l.audio.bounce),t=30;break;case"seaweed-1":h(l.audio.shoot),t=20;break;default:h(l.audio.shoot),t=10}document.getElementById(e).classList.add("destroyed"),l.creatures[e].status=0,l.score.removed++,l.score.points+=t,m()}.bind(null,s),!1),l.creatures[s]={x:a,y:r,type:e.type,status:1},l.container.el.appendChild(o),l.score.spawned++,m()}function h(e){e.paused?e.play():e.currentTime=0}function o(){l.score.board.h=l.score.board.el.offsetHeight,l.container.el.style.height="calc( 100vh - "+l.score.board.h+"px)",l.container.x=l.container.el.offsetWidth,l.container.y=l.container.el.offsetHeight}function a(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.returnValue=!1}function r(e){if({37:1,38:1,39:1,40:1}[e.keyCode])return a(e),!1}window.addEventListener("load",function(){var e;e="../../wp-content/themes/uri-modern-home/features/2018/space-invaders/",(l={unit:16,status:0,pointcap:50,n:0,story:{h:document.getElementById("story").offsetHeight,top:document.getElementById("story").getBoundingClientRect().top},buttons:{},creatures:{},container:{},score:{points:0,spawned:0,removed:0,board:{}},timing:{init:2e3,duration:6e4},audio:{bounce:new Audio(e+"mp3/bounce.mp3"),elevate:new Audio(e+"mp3/elevate.mp3"),shoot:new Audio(e+"mp3/shoot.mp3"),end:new Audio(e+"mp3/end.mp3"),menu:new Audio(e+"mp3/menu.mp3")}}).habitat=document.getElementById("creature-box").querySelector(".creatures"),l.startscreen=document.getElementById("startscreen"),l.score.board.el=document.getElementById("scoreboard"),l.score.board.points=document.getElementById("points").querySelector(".score"),l.score.board.remaining=document.getElementById("remaining").querySelector(".score"),l.score.board.h=l.score.board.el.offsetHeight,l.container.el=document.getElementById("creature-container"),l.container.el.style.height="calc( 100vh - "+l.score.board.h+"px)",l.container.x=l.container.el.offsetWidth,l.container.y=l.container.el.offsetHeight,function(){window.addEventListener&&window.addEventListener("DOMMouseScroll",a,!1);window.onwheel=a,window.onmousewheel=document.onmousewheel=a,window.ontouchmove=a,document.onkeydown=r}(),function(){var e,t,n,o,a;for(t=document.createElement("div"),e=0;e<15;e++)n=p(),o=l.unit*Math.floor(48*Math.random()+1),a=Math.floor(10*Math.random()+1),n.div.style="left:"+o+"px; z-index:"+a,t.appendChild(n.div);l.habitat.appendChild(t)}(),l.buttons.play=document.getElementById("play-game"),l.buttons.play.addEventListener("click",function(){h(l.audio.menu),setTimeout(t,1e3)},!1),l.buttons.reset=document.getElementById("reset-game"),l.buttons.reset.addEventListener("click",function(){h(l.audio.menu),setTimeout(n,1e3)},!1),l.buttons.pause=document.getElementById("pause-game"),l.buttons.pause.addEventListener("click",function(){1==l.status&&(h(l.audio.menu),l.status=3,l.timing.paused=Date.now(),l.container.el.classList.add("paused"))},!1),l.buttons.resume=document.getElementById("resume-game"),l.buttons.resume.addEventListener("click",function(){var e;3==l.status&&(h(l.audio.menu),e=Date.now(),l.status=1,l.timing.start+=e-l.timing.paused,l.container.el.classList.remove("paused"),setTimeout(i,l.timing.interval))},!1),l.progress=document.getElementById("progress-bar"),l.endscreen=document.getElementById("endscreen"),window.addEventListener("resize",o,!1)},!1)}();
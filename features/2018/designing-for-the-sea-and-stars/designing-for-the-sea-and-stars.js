/* built */!function(){"use strict";function o(t){var e,s,i,a,n,r;for(e=t.scale.ticks.length,t.scale.waterline=t.sky.offsetHeight/t.storyHeight*100,98,t.bar.style.marginLeft="calc( -50vw + ("+((i=document.createElement("div")).style.visibility="hidden",i.style.width="100px",i.style.msOverflowStyle="scrollbar",document.body.appendChild(i),a=i.offsetWidth,i.style.overflow="scroll",(n=document.createElement("div")).style.width="100%",i.appendChild(n),r=n.offsetWidth,i.parentNode.removeChild(i),a-r)+"px / 2 ) )",t.bar.style.background="linear-gradient(to bottom, rgba(0,0,0,.4) calc( "+t.scale.waterline+"% + 5px ), rgba(18,85,146,.4) calc( "+t.scale.waterline+"% + 5px ), rgba(0,20,40,.6) calc( 98% + 5px ), rgba(120,96,38,.5) calc( 98% + 5px ))",t.scale.ticks[0].style.top=t.scale.waterline+"%",t.scale.ticks[e-1].style.top="98%",s=1;s<e-1;s++)t.scale.ticks[s].style.top=t.scale.waterline+t.scale.depths[s]/t.scale.depths[e-1]*(98-t.scale.waterline)+"%"}function d(t){var e,s;e=window.pageYOffset,s=Math.min(97,Math.max(0,e/t.storyHeight*100)),t.indicator.style.top=s+"%",s>t.scale.waterline-1?t.indicator.classList.add("titan"):t.indicator.classList.remove("titan"),e<t.lastPos?t.indicator.classList.add("flame"):t.indicator.classList.remove("flame"),(t.lastPos=e)>t.pos?(t.bar.classList.add("sticky"),t.storyHeight+t.pos<e+t.vh?t.bar.classList.add("end"):t.bar.classList.remove("end")):t.bar.classList.remove("sticky")}window.addEventListener("load",function(){e=document.querySelectorAll(".parallax"),window.addEventListener("scroll",function(){for(this.pageYOffset,s=this.innerHeight,i=this.innerWidth,l=0;l<e.length;l++)r=e[l].getBoundingClientRect().top-s,a=e[l].getAttribute("data-speed")*i/1e3,n=Math.min(0,r*a/100),e[l].setAttribute("style","transform: translate3d(0px, "+n+"px, 0px)")}),t={vh:window.innerHeight,vw:window.innerWidth,lastPos:window.pageYOffset,bar:document.getElementById("progress"),indicator:document.getElementById("indicator"),scale:function(){var t,e;for(t={ticks:document.getElementById("progress").querySelectorAll(".progress-label"),depths:[]},e=0;e<t.ticks.length;e++)t.depths.push(t.ticks[e].getAttribute("data-depth"));return t}(),sky:document.getElementById("keyframe-backdrop-sky"),story:document.getElementById("story")},t.pos=t.story.getBoundingClientRect().top,t.storyHeight=t.story.offsetHeight,t.bar.classList.add("has-js"),o(t),d(t),window.addEventListener("scroll",d.bind(null,t),!1),window.addEventListener("resize",function(){t.vh=window.innerHeight,t.vw=window.innerWidth,t.storyHeight=t.story.offsetHeight,o(t),d(t)},!1);var t;var e,s,i,a,n,r,l},!1)}();